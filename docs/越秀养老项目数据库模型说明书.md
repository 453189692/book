#越秀养老项目数据库模型说明书

(V1.0)

##第一章 引言

###编写目的

本文档是对越秀养老项目数据物理模型设计文档，明确数据库名、表名、字段名、数据类型、字段注释等数据信息，用来指导后期的开发,
本文档的读者对象是需求人员、系统设计人员、开发人员、测试人员。

### 特别说明

本模型设计采用非关系型数据库设计方法，不满足关系型数据库中的范式化设计，即一张表是一个集合（collection），每一条数据是一个文档（document）,
一个文档内有多个字段，每个字段可再内嵌文档。

  {#section-1 .ListParagraph}

## 第二章 组织中心数据模型设计

###1. 数据库

####数据库名：db\_organization

> ***表清单：***

| 表名                  | 注释       |
| :-------------------- | ---------- |
| business_organization | 业务组织表 |
| resource_organization | 资源组织表 |

###2. 数据表详情

####业务组织表：business_organization

| 字段名    | 数据类型                   | 注释           |
| --------- | -------------------------- | -------------- |
| _id       | ObjectId                   | 主键           |
| pname     | String                     | 父组织结构名称 |
| pid       | String                     | 父节点ID       |
| name      | String                     | 组织名称       |
| princapal | String                     | 负责人         |
| tel       | String                     | 联系电话       |
| addr      | String                     | 地址           |
| email     | String                     | 邮箱           |
| fax       | String                     | 传真           |
| typeName  | String                     | 类型名称       |
| typeLevel | String                     | 类型级别       |
| key       | String                     | 类型key        |
| path      | String                     | 路径           |
| ids       | List<String>               | 所属项目id     |
| childList | List<businessOrganization> | 子组织集       |

####资源组织表：resource\_organization

| 字段名    | 数据类型                   | 注释           |
| --------- | -------------------------- | -------------- |
| _id       | ObjectId                   | 主键           |
| pname     | String                     | 父组织结构名称 |
| pid       | String                     | 父节点ID       |
| name      | String                     | 组织名称       |
| princapal | String                     | 负责人         |
| tel       | String                     | 联系电话       |
| addr      | String                     | 地址           |
| email     | String                     | 邮箱           |
| fax       | String                     | 传真           |
| path      | String                     | 路径           |
| childList | List<businessOrganization> | 子组织集       |

## 第三章 员工中心数据模型设计

### 1. 数据库

####数据库名：db\_organization

> 表清单：

| 表名                         | 注释                |
| ---------------------------- | ------------------- |
| staff                        | 员工表              |
| role                         | 角色表              |
| staff_binding_data_authority | 员工-数据权限绑定表 |
| staff_binding_role           | 员工-角色绑定表     |
| power                        | 权限表              |
| menu                         | 菜单表              |
| button                       | 按钮表              |

###2. 数据表详情

####员工表：staff

| 字段名                | 数据类型             | 注释             |
| --------------------- | -------------------- | ---------------- |
| _id                   | ObjectId             | 主键             |
| pId                   | String               | 员工系统编号     |
| name                  | String               | 员工姓名         |
| sex                   | String               | 员工性别         |
| account               | String               | 员工账号         |
| accountStatus         | int                  | 员工状态         |
| number                | String               | 员工编号         |
| birthday              | String               | 出生日期         |
| identity              | String               | 身份证号码       |
| marryStatus           | String               | 婚姻状态         |
| onJob                 | String               | 在职状态         |
| education             | String               | 文化程度         |
| nationality           | String               | 民族             |
| roleName              | List<String>         | 角色名列表       |
| politicalStatus       | String               | 政治面貌         |
| level                 | String               | 等级             |
| job                   | String               | 职业             |
| isAdmin               | boolean              | 是否为管理员账号 |
| region                | String               | 所属区域         |
| businessOrganizations | BusinessOrganization | 业务组织         |
| resourceOrganizations | ResourceOrganization | 资源组织         |

####角色表：role

| 字段名   | 数据类型     | 注释     |
| -------- | ------------ | -------- |
| _id      | ObjectId     | 主键     |
| roleName | String       | 角色名称 |
| roleDesc | String       | 角色描述 |
| powerIds | List<String> | 权限集   |
| roleType | String       | 角色类型 |

####员工-数据权限绑定表：staff\_binding\_data\_authority

| 字段名         | 数据类型 | 注释       |
| -------------- | -------- | ---------- |
| _id            | ObjectId | 主键       |
| staffId        | String   | 员工Id     |
| businessId     | String   | 业务组织Id |
| businessName   | String   | 组织名称   |
| effectTime     | String   | 生效时间   |
| loseEffectTime | String   | 失效时间   |

####员工-角色绑定表：staff\_binding\_role

| 字段名    | 数据类型 | 注释   |
| --------- | -------- | ------ |
| _id       | ObjectId | 主键   |
| staffId   | String   | 员工Id |
| roleId    | String   | 角色Id |
| projectId | String   | 项目Id |

## 第四章 统一认证中心数据模型设计

### 1. 数据库

####数据库名：db\_authentication

> 数据表清单

| 表名                         | 注释                |
| ---------------------------- | ------------------- |
| person                       | 人员表              |
| account                      | 账户表              |
| staff_binding_data_authority | 员工-数据权限绑定表 |

### 2. 数据表详情

####人员表：person

| 字段名          | 数据类型 | 注释                 |
| --------------- | -------- | -------------------- |
| _id             | ObjectId | 主键，人员系统唯一Id |
| name            | String   | 员工姓名             |
| cellPhone       | String   | 手机号               |
| identityCard    | String   | 证件号               |
| certicicateType | String   | 证件类型             |

####账户表：account

| 字段名        | 数据类型 | 注释         |
| ------------- | -------- | ------------ |
| _id           | ObjectId | 主键         |
| loginName     | String   | 账号名       |
| accountStatue | int      | 账号状态     |
| passWord      | String   | 密码         |
| salt          | String   | 盐           |
| personId      | String   | 绑定的人员Id |
| initTime      | String   | 生成时间     |

## 第五章 客户中心数据模型设计

### 1. 数据库

####库名：db\_client

>  数据表清单

| 表名        | 注释       |
| ----------- | ---------- |
| client_info | 客户信息表 |

### 2. 数据表详情

####客户信息表：client\_info

| 字段名          | 数据类型 | 注释       |
| --------------- | -------- | ---------- |
| _id             | ObjectId | 主键       |
| clientId        | String   | 客户Id     |
| name            | String   | 姓名       |
| gender          | String   | 性别       |
| phone           | String   | 联系电话   |
| wordUnit        | String   | 工作单位   |
| nation          | String   | 民族       |
| nativePlace     | String   | 籍贯       |
| certificateType | String   | 证件类型   |
| idNumber        | String   | 证件号     |
| birthday        | String   | 出生日期   |
| houseboldAddr   | String   | 户籍地址   |
| educationLevel  | String   | 文化程度   |
| maritalStatus   | String   | 婚姻状态   |
| language        | String   | 语言       |
| religion        | String   | 宗教信仰   |
| residenceStatus | String   | 居住状态   |
| hobby           | String   | 兴趣爱好   |
| homeAddr        | String   | 家庭住址   |
| personalDemand  | String   | 个性化需求 |

## 第六章 养老客户中心数据模型设计

### 1. 数据库

####库名：db\_beadhouse\_file

> 数据表清单

| 表名                  | 注释           |
| --------------------- | -------------- |
| elder_info            | 长者信息表     |
| elder_evaluate_record | 长者评估记录表 |
| elder_health_record   | 长者健康信息表 |

### 2. 数据表详情

####长者信息表：elder\_info

| 字段名          | 数据类型 | 注释         |
| --------------- | -------- | ------------ |
| _id             | ObjectId | 主键         |
| elderId         | String   | 长者Id       |
| name            | String   | 长者姓名     |
| gender          | String   | 长者性别     |
| phone           | String   | 长者联系电话 |
| nation          | String   | 长者民族     |
| nativePlace     | String   | 长者籍贯     |
| certificateType | String   | 证件类型     |
| idNumber        | String   | 证件号       |
| birthday        | String   | 出生日期     |
| householdAddr   | String   | 户籍地址     |
| educationLevel  | String   | 文化程度     |
| maritalStatus   | String   | 婚姻状态     |
| language        | String   | 语言         |
| religion        | String   | 宗教信仰     |
| residenceStatus | String   | 居住状态     |
| hobby           | String   | 兴趣爱好     |
| homeAddr        | String   | 家庭住址     |
| personalDemand  | String   | 个性化需求   |
| elderAvatar     | OSSFile  | 长者头像     |

> oss文件记录表：OSSFile

| 字段名       | 数据类型 | 注释            |
| ------------ | -------- | --------------- |
| uid          | String   |                 |
| name         | String   | 文件名          |
| path         | String   | OSS内部文件路径 |
| bucketName   | String   | OSS的bucket名字 |
| downloadPath | String   | 下载地址        |

####长者评估记录表：elder\_evaluate\_record

| 字段名               | 数据类型            | 注释       |
| -------------------- | ------------------- | ---------- |
| _id                  | ObjectId            | 主键       |
| elderId              | String              | 长者Id     |
| name                 | String              | 长者姓名   |
| evaluaterList        | List<EvaluaterPO>   | 评估人列表 |
| evaluateTime         | String              | 评估时间   |
| evaluateType         | String              | 评估类型   |
| evaluateTableVersion | String              | 评估表版本 |
| status               | String              | 评估状态   |
| score                | Integter            | 评估总分   |
| data                 | Map<String, Object> | 评估详情   |
| evaluateOrigin       | String              | 评估来源   |
| evaluateResult       | String              | 评估结果   |

> EvaluaterPO

| 字段名        | 数据类型 | 注释       |
| ------------- | -------- | ---------- |
| evaluaterId   | String   | 评估人Id   |
| evaluaterName | String   | 评估人姓名 |

####长者健康信息表：elder\_health\_record

| 字段名         | 数据类型 | 注释         |
| -------------- | -------- | ------------ |
| _id            | ObjectId | 主键         |
| elderId        | String   | 长者Id       |
| healthInfoType | String   | 健康信息类型 |
| data           | String   | 评估信息     |

## 第七章 商品中心数据模型设计

### 1. 数据库

####库名：db\_goods

> 数据表清单

| 表名     | 注释       |
| -------- | ---------- |
| spu      | spu表      |
| sku      | sku表      |
| bed      | 床位表     |
| room     | 房间表     |
| feedback | 反馈模版表 |

###2. 数据表详情

####spu表：spu

| 字段名        | 数据类型            | 注释     |
| ------------- | ------------------- | -------- |
| _id           | ObjectId            | 主键     |
| projectId     | String              | 项目Id   |
| settingType   | String              | 所属类型 |
| createTime    | Date                | 创建时间 |
| modifyTime    | Date                | 修改时间 |
| propertyValue | List<PropertyValue> | 属性信息 |

> PropertyValue:

| 字段名 | 数据类型 | 注释   |
| ------ | -------- | ------ |
| id     | String   | id     |
| name   | String   | 属性名 |
| value  | String   | 属性值 |

####sku表：sku

| 字段名           | 数据类型                | 注释     |
| ---------------- | ----------------------- | -------- |
| _id              | ObjectId                | 主键     |
| operatorId       | String                  | 操作人Id |
| projectId        | String                  | 项目Id   |
| settingType      | String                  | 商品类型 |
| serviceName      | String                  | 服务名称 |
| mnemonicCode     | String                  | 助记码   |
| price            | BigDecimal              | 服务价格 |
| unit             | String                  | 单位     |
| takeEffectTime   | String                  | 生效时间 |
| loseEfficacyTime | String                  | 失效时间 |
| remark           | String                  | 备注     |
| nurseContents    | List<NurseServicePO>    | 措施内容 |
| bedServices      | List<BedServicePO>      | 床位信息 |
| cateringServices | List<CateringServicePO> | 餐饮内容 |
| goodsServices    | List<GoodServicePO>     | 物品内容 |

####床位表（bed)

| 字段名    | 数据类型                    | 注释     |
| --------- | --------------------------- | -------- |
| _id       | ObjectId                    | 主键     |
| roomId    | String                      | 房间Id   |
| bedName   | String                      | 名称     |
| condition | List<Map<String,   String>> | 入住情况 |
| state     | String                      | 床位状态 |
| remark    | String                      | 备注     |

####房间表：room

| 字段名         | 数据类型 | 注释     |
| -------------- | -------- | -------- |
| _id            | ObjectId | 主键     |
| projectId      | String   | 项目Id   |
| organizationId | String   | 组织Id   |
| layerNumber    | String   | 楼层编号 |
| roomNumber     | String   | 房间编号 |
| number         | String   | 室号     |
| region         | String   | 所属区域 |

####反馈模版表：feedback

| 字段名        | 数据类型           | 注释       |
| ------------- | ------------------ | ---------- |
| _id           | ObjectId           | 主键       |
| projectId     | String             | 项目Id     |
| feedbackName  | String             | 反馈名称   |
| userName      | String             | 修改人     |
| userId        | String             | 修改人Id   |
| editTime      | String             | 修改时间   |
| feedbackBills | List<FeedbackBill> | 反馈项明细 |

> FeedbackBill:

| 字段名 | 数据类型 | 注释         |
| ------ | -------- | ------------ |
| name   | String   | 反馈项名称   |
| type   | String   | 反馈项类型   |
| value  | Object   | 反馈项属性值 |

## 第八章 交易中心数据模型设计

###1. 数据库

####库名：db\_transaction

> 数据表清单

| 表名  | 注释   |
| ----- | ------ |
| order | 订单表 |

###2. 数据表详情

####订单表：order

| 字段名          | 数据类型              | 注释         |
| --------------- | --------------------- | ------------ |
| _id             | ObjectId              | 主键         |
| projectId       | String                | 项目Id       |
| consigneeId     | String                | 收货人Id     |
| consigneeName   | String                | 收货人姓名   |
| beginTime       | String                | 订单开始时间 |
| endTime         | String                | 订单结束时间 |
| payerId         | String                | 付款人id     |
| payerName       | String                | 付款人姓名   |
| orderState      | String                | 订单状态     |
| price           | String                | 价格         |
| orderNum        | String                | 订单编号     |
| type            | String                | 类型         |
| origin          | String                | 来源         |
| custom          | Map<String,   Object> | 定制数据     |
| orderDetailList | List<OrderDetailPO>   | 订单详情列表 |

> OrderDetailPO:

| 字段名        | 数据类型              | 注释       |
| ------------- | --------------------- | ---------- |
| uuid          | String                | 唯一标示   |
| state         | String                | 状态       |
| goodsId       | String                | 商品Id     |
| name          | String                | 商品名称   |
| amount        | String                | 数量       |
| consigneeId   | String                | 收货人Id   |
| consigneeName | String                | 收货人姓名 |
| custom        | Map<String,   Object> | 定制数据   |

##第九章 调度中心数据模型设计

###1. 数据库

####库名：db\_schedule

> 数据表清单

| 表名     | 注释     |
| -------- | -------- |
| task     | 任务表   |
| workflow | 工作流表 |

###2. 数据表详情

####任务表：task

| 字段名           | 数据类型              | 注释           |
| ---------------- | --------------------- | -------------- |
| _id              | ObjectId              | 主键           |
| taskName         | String                | 任务名称       |
| taskContent      | String                | 任务内容       |
| taskTarget       | TaskTargetPO          | 任务对象       |
| taskExecutorList | List<TaskExecutorPO>  | 执行人列表     |
| billDetailPlanId | String                | 详情计划Id     |
| taskType         | String                | 任务类型       |
| taskOrigin       | String                | 任务来源       |
| sponsorId        | String                | 发起人Id       |
| sponsorName      | String                | 发起人姓名     |
| sponsorTime      | String                | 发起时间       |
| executorId       | String                | 实际执行人Id   |
| executorName     | String                | 实际执行人姓名 |
| priorityLevel    | int                   | 优先级         |
| status           | String                | 状态           |
| feedbackId       | String                | 反馈模版Id     |
| feedbackValue    | Mao<String,   Object> | 反馈内容       |
| reminderTime     | String                | 任务提醒时间   |
| startTime        | String                | 计划开始时间   |
| endTIme          | String                | 计划结束时间   |
| finishTime       | String                | 任务完成时间   |
| cancelTime       | String                | 任务取消时间   |
| projectId        | String                | 所属项目Id     |
| end              | boolean               | 是否已发送     |
| workflow         | boolean               | 是否为工作流   |
| lastModifiedTime | String                | 最后修改时间   |

####工作流表：workflow

| 字段名                    | 数据类型                    | 注释           |
| ------------------------- | --------------------------- | -------------- |
| _id                       | ObjectId                    | 主键           |
| name                      | String                      | 工作流名称     |
| key                       | String                      | 编码           |
| operationRecordList       | List<OperationecordPO>      | 操作记录列表   |
| workflowTaskCaseGroupList | List<WorkflowTaskCaseGroup> | 工作流任务组   |
| step                      | int                         | 当前步骤       |
| status                    | String                      | 工作流状态     |
| sponsorId                 | String                      | 发起人Id       |
| sponsorName               | String                      | 发起人姓名     |
| sponsorTime               | String                      | 发起时间       |
| startTime                 | String                      | 工作流开始时间 |
| projectId                 | String                      | 项目Id         |

## 第十章 配置中心数据模型设计

###1. 数据库

####库名：db\_configuration

> 数据表清单

| 表名                    | 注释       |
| ----------------------- | ---------- |
| dictionary              | 字典表     |
| access_table_config     | 量表模版表 |
| module                  | 模块表     |
| cause_configuration     | 导因表     |
| diagnosis_configuration | 诊断表     |
| symptom_configuration   | 症状表     |

###2. 数据表详情

####字典表：dictionary

| 字段名      | 数据类型        | 注释         |
| ----------- | --------------- | ------------ |
| _id         | ObjectId        | 主键         |
| key         | String          | key          |
| name        | String          | 名称         |
| options     | List<DicOption> | 选项列表     |
| insertTime  | Date            | 插入时间     |
| lastModTime | Date            | 最后修改时间 |

> DicOption:

| 字段名      | 数据类型 | 注释         |
| ----------- | -------- | ------------ |
| key         | String   | key          |
| name        | String   | 名称         |
| value       | int      | 值           |
| insertTime  | Date     | 插入时间     |
| lastModTime | Date     | 最后修改时间 |
| custom      | Object   | 自定义内容   |

####量表模版：assess\_table\_config

| 字段名          | 数据类型             | 注释           |
| --------------- | -------------------- | -------------- |
| _id             | ObjectId             | 主键           |
| projectId       | String               | 项目Id         |
| assessTableId   | String               | 量表唯一标示Id |
| assessTableName | String               | 量表名称       |
| totalScore      | int                  | 总分值         |
| modifyTime      | String               | 修改时间       |
| version         | String               | 版本号         |
| takeEffect      | Boolean              | 是否生效       |
| assessItems     | List<AssessItemPO>   | 量表项目集     |
| assessResults   | List<AssessResultPO> | 量表评估结果集 |

> AssessItemPO

| 字段名       | 数据类型            | 注释       |
| ------------ | ------------------- | ---------- |
| id           | String              | id         |
| itemTitle    | String              | 项目名称   |
| itemScore    | int                 | 项目分数   |
| assessTopics | List<AssessTopicPO> | 项目题目集 |

> AssessResultPO:

| 字段名       | 数据类型 | 注释     |
| ------------ | -------- | -------- |
| minScore     | int      | 最小分值 |
| maxScore     | int      | 最大分值 |
| assessResult | String   | 评估结果 |

####模块表：module

| 字段名     | 数据类型     | 注释           |
| ---------- | ------------ | -------------- |
| _id        | ObjectId     | 主键           |
| name       | String       | 名字           |
| key        | String       | 名字对应的key  |
| roleIdList | List<String> | 权限角色id列表 |

####导因表：cause\_configuration

| 字段名     | 数据类型 | 注释     |
| ---------- | -------- | -------- |
| _id        | ObjectId | 主键     |
| name       | String   | 导因名称 |
| createTime | Date     | 创建时间 |
| modTime    | Date     | 修改时间 |
| isCheak    | String   | 是否勾选 |

####诊断表：diagnosis\_configuration

| 字段名        | 数据类型 | 注释     |
| ------------- | -------- | -------- |
| _id           | ObjectId | 主键     |
| diagnosisName | String   | 诊断名称 |
| createTime    | Date     | 创建时间 |
| modTime       | Date     | 修改时间 |
| isCheak       | String   | 是否勾选 |

####症状表：symptom

| 字段名     | 数据类型 | 注释     |
| ---------- | -------- | -------- |
| _id        | ObjectId | 主键     |
| name       | String   | 症状名称 |
| createTime | Date     | 创建时间 |
| modTime    | Date     | 修改时间 |
| isCheak    | String   | 是否勾选 |

## 第十一章合约中心数据模型设计

###1. 数据库

####库名：db\_contract

> 数据表清单

| 表名          | 注释   |
| ------------- | ------ |
| contract_info | 合约表 |

###2. 数据表详情

####合约表（contract\_info）

| 字段名           | 数据类型               | 注释           |
| ---------------- | ---------------------- | -------------- |
| _id              | ObjectId               | 主键           |
| contractNo       | String                 | 合同编号       |
| firstParty       | String                 | 甲方           |
| firstAddress     | String                 | 甲方地址       |
| firstPhone       | String                 | 甲方联系方式   |
| secondParty      | String                 | 乙方           |
| secondSex        | String                 | 乙方性别       |
| secondEducation  | String                 | 乙方文化程度   |
| certificateType  | String                 | 乙方证件类型   |
| identifyNumber   | String                 | 乙方身份证号码 |
| homeAddress      | String                 | 乙方家庭地址   |
| scondContracts   | List<SecondContractPO> | 乙方监护人     |
| agreements       | List<AgreementPO>      | 协议信息       |
| attachmentPO     | AttachmentPO           | 附件           |
| effectTime       | String                 | 生效时间       |
| loseEffectTime   | String                 | 失效时间       |
| hospitalizedTime | String                 | 入院时间       |
| projectId        | String                 | 项目Id         |
| submit           | boolean                | 保存状态       |

> AgreementPO

| 字段名         | 数据类型     | 注释         |
| -------------- | ------------ | ------------ |
| _id            | String       | 协议Id       |
| protocolNo     | String       | 协议编号     |
| protocolName   | String       | 协议名称     |
| contractId     | String       | 合同Id       |
| elderId        | String       | 长者Id       |
| signTime       | String       | 签约时间     |
| effectTime     | String       | 协议生效时间 |
| loseEffectTime | String       | 协议失效时间 |
| uploadMany     | List<String> | 协议附件     |